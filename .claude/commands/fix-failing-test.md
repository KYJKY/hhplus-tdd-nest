Analyze and fix failing tests.

1. Analyze the cause of the test failure
2. Decide whether to modify the implementation or the test
3. Propose a fix
4. Verify that other tests are unaffected

If the test is incorrect, update the test; if the implementation is incorrect, update the implementation.
